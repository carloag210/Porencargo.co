<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ producto.nombre }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/producto_detalle.css') }}">
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <button class="menu-toggle" aria-label="Abrir menú">☰</button>
                <div class="logo_porEncargo">
                    <a href="{{ url_for('index') }}">
                        <img src="{{ url_for('static', filename='img/logo_porEncargo_sinLetras.jpg') }}" alt="logo">
                    </a>
                </div>
                <ul class="nav-links">
                    <li><a href="{{ url_for('index')}}">Inicio</a></li>
                    <li><a href="{{ url_for('login_register')}}">Mi casillero</a></li>
                    <li><a href="{{ url_for('productos')}}">Productos</a></li>
                    <li><a href="{{ url_for('calculadora')}}" class="contacto-btn">Calculadora</a></li>
                    <li><a href="{{ url_for('rastrea_tu_orden')}}">Rastrea tu orden</a></li>
                    {% if current_user.is_authenticated and current_user.is_admin %}
                        <li><a href="{{ url_for('admin_panel') }}">Panel Admin</a></li>
                    {% endif %}
                    {% if current_user.is_authenticated and not current_user.is_admin %}
                        <li><a href="{{ url_for('pedidos_del_usuario') }}">Mis pedidos</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </header>

<div class="detalle-img">
    <div class="carousel">
        <div class="carousel-track">
            {% for img in producto.imagenes %}
                <div class="carousel-slide">
                    <img src="{{ url_for('static', filename=img.ruta) }}" alt="{{ producto.nombre }}">
                </div>
            {% endfor %}
        </div>
        <button class="carousel-btn prev">❮</button>
        <button class="carousel-btn next">❯</button>
    </div>
</div>

      <!-- Ejemplo: si tienes más imágenes en el futuro, puedes agregarlas aquí -->
      {# 
      <div class="swiper-slide">
        <img src="{{ url_for('static', filename='img/otro_ejemplo.jpg') }}" alt="otra imagen">
      </div>
      #}
    </div>

    <!-- Controles -->
    <div class="swiper-pagination"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
  </div>
</div>
        </div>

        <!-- Flechas de navegación -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>

        <!-- Paginación (punticos) -->
        <div class="swiper-pagination"></div>
    </div>
</div>



        <div class="detalle-info">
            <h1>{{ producto.nombre }}</h1>
            <p class="precio">${{ producto.precio }}</p>
            <p class="descripcion">{{ producto.descripcion or 'Sin descripción disponible' }}</p>

            <a href="https://wa.me/573186505475?text=Hola,%20me%20interesa%20el%20producto%20{{ producto.nombre }}">
                <button class="btn-comprar">Comprar por WhatsApp</button>
            </a>
        </div>
    </main>

    <!-- WhatsApp flotante -->
    <a href="https://wa.me/573186505475" target="_blank" style="position:fixed;bottom:20px;right:20px;z-index:9999;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/WhatsApp_icon.png" alt="WhatsApp" style="width:50px;height:50px;">
    </a>

    <script src="{{ url_for('static', filename='js/animacion_contact.js') }}"></script>

        <!-- WhatsApp flotante -->
    <a href="https://wa.me/573186505475" target="_blank" style="position:fixed;bottom:20px;right:20px;z-index:9999;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/WhatsApp_icon.png" alt="WhatsApp" style="width:50px;height:50px;">
    </a>

    <script src="{{ url_for('static', filename='js/animacion_contact.js') }}"></script>

    <!-- Swiper JS (para el carrusel de imágenes del producto) -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
    var swiper = new Swiper(".mySwiperDetalle", {
      loop: true,
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
    });
    </script>
    <script>
document.addEventListener("DOMContentLoaded", () => {
    const track = document.querySelector(".carousel-track");
    const slides = Array.from(track.children);
    const prevButton = document.querySelector(".carousel-btn.prev");
    const nextButton = document.querySelector(".carousel-btn.next");
    let currentIndex = 0;

    function updateSlide(index) {
        track.style.transform = `translateX(-${index * 100}%)`;
    }

    nextButton.addEventListener("click", () => {
        currentIndex = (currentIndex + 1) % slides.length;
        updateSlide(currentIndex);
    });

    prevButton.addEventListener("click", () => {
        currentIndex = (currentIndex - 1 + slides.length) % slides.length;
        updateSlide(currentIndex);
    });
});
</script>



